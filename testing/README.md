# Enhanced Testing Suite Documentation

## Overview

The `Enhanced Testing and Validation Suite` is designed to provide a comprehensive framework for testing and validating modern infrastructure components within a Kubernetes-based homelab setup. This suite integrates various testing tools and methodologies, including `Terratest`, `Helm Unittest`, `security validations`, and `performance benchmarking`, to ensure robustness, security, and performance compliance.

## Features

- **Terraform Module Testing**: Leverages `Terratest` for testing Terraform modules to ensure infrastructure components are provisioned correctly.
- **Helm Chart Testing**: Utilizes `helm-unittest` to validate Helm charts, focusing on templates and configuration correctness.
- **Security Testing**: Covers TLS, mTLS, RBAC, network policies, and certificate validation to ensure security standards and best practices.
- **Performance Benchmarking**: Includes detailed performance testing of the Kubernetes cluster, network throughput, response times, and more.
- **Infrastructure Compliance Scanning**: Performs compliance checks against configuration and infrastructure state.
- **CI/CD Integration**: Automates validation and testing through GitHub Actions workflows.

## Usage

Running the entire suite can be accomplished via the `run-enhanced-tests.sh` script:

### Script Usage

```shell
./testing/run-enhanced-tests.sh [OPTIONS]
```

### Options

- `--terratest` / `--no-terratest`: Enable or disable Terratest runs.
- `--helm-unittest` / `--no-helm-unittest`: Enable or disable Helm chart unit testing.
- `--security` / `--no-security`: Enable or disable security validation tests.
- `--performance` / `--no-performance`: Enable or disable performance benchmarks.
- `--compliance` / `--no-compliance`: Enable or disable infrastructure compliance scanning.
- `--timeout SECONDS`: Specify a maximum duration for tests.
- `--parallel-jobs N`: Set the number of parallel execution jobs.
- `--log-level LEVEL`: Adjust logging verbosity (DEBUG, INFO, WARNING, ERROR).
- `--clean`: Remove previous test artifacts before running new tests.
- `--dry-run`: Display planned actions without executing.

### Examples

- Run all tests with defaults:

  ```shell
  ./testing/run-enhanced-tests.sh
  ```

- Run only Terratest and skip performance tests:

  ```shell
  ./testing/run-enhanced-tests.sh --terratest --no-performance
  ```

- Use extended timeout and run more jobs in parallel:

  ```shell
  ./testing/run-enhanced-tests.sh --timeout 3600 --parallel-jobs 8
  ```

## Output

After running, results and reports are saved to the `test_results` directory, organized by category, with a summary report generated in markdown format.

## Contribution

Contributions to enhance or extend the suite are welcome. Please follow the established coding patterns and contribute to feature-specific branches.

---
*Documentation generated by CI/CD pipeline based on latest testing suite updates.*
